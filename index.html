<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>胡雨晨生日快乐</title>
    <style>
        :root {
            --primary-color: #FF3B30;
            --secondary-color: #FF9500;
            --background-base: linear-gradient(200deg, #F5F7FF 0%, #FEF4EB 100%);
            --card-bg: rgba(255, 255, 255, 0.85);
            --card-shadow: 0 12px 24px -6px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* -webkit-tap-highlight-color: transparent; */
        }

        body {
            background: var(--background-base);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            min-height: 100vh;
            height: 100vh;
            color: #1D1D1F;
            line-height: 1.6;
            overflow-x: hidden;
            /* overflow-y: hidden; */
        }

        .container {
            padding: max(20px, env(safe-area-inset-top)) max(16px, env(safe-area-inset-right)) max(20px, env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-left));
            position: relative;
        }

        h1 {
            font-size: clamp(2rem, 6vw, 3rem);
            font-weight: 700;
            text-align: center;
            margin: 2rem 0;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -0.03em;
        }

        /* 苹果风格滑动容器 */
        .slider-container {
            width: 100%;
            height: 65vh;
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            margin: 2rem 0;
            position: relative;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .slider-container::-webkit-scrollbar {
            display: none;
        }

        .photo-slider {
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            display: flex;
            height: 100%;
            padding: 0 1rem;
        }

        .slide {
            scroll-snap-align: center;
            width: calc(100vw - 3rem);
            height: 100%;
            flex: 0 0 auto;
            margin: 0 0.5rem;
            border-radius: 24px;
            overflow: hidden;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            box-shadow: var(--card-shadow);
            transform-origin: center;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .slide.active img {
            transform: scale(1.02);
        }

        /* 飘落效果优化 */
        .falling-photo {
            position: fixed;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            animation: float 8s linear infinite;
            opacity: 0.9;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
            transform: translateY(-120%);
        }

        /* 网盘按钮 */
        .cloud-link {
            position: fixed;
            bottom: max(20px, env(safe-area-inset-bottom));
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            text-decoration: none;
            color: var(--primary-color);
            font-weight: 500;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .cloud-link:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.08);
        }

        @keyframes float {
            0% {
                transform: translateY(-120vh) rotate(0deg);
            }

            100% {
                transform: translateY(120vh) rotate(360deg);
            }
        }

        /* 隐藏滚动条 */
        .slider-container::-webkit-scrollbar {
            display: none;
        }

        /* 苹果风格指示器 */
        .indicator {
            position: fixed;
            bottom: clamp(100px, 15vh, 120px);
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.8rem;
            padding: 0.6rem;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .dot {
            width: 8px;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .dot.active {
            background: var(--primary-color);
            transform: scale(1.4);
        }

        .photo-slider {
            transition: transform 0.3s ease-out;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>🎂 胡雨晨生日快乐！🎉</h1>

        <!-- 滑动照片区 -->
        <div class="slider-container" id="slider">
            <div class="photo-slider" id="slider2">
                <!-- 最后一张的副本放在最前面 -->
                <div class="slide"><img src="images/6.jpg"></div>
                <!-- 原始7张 -->
                <div class="slide"><img src="images/0.jpg"></div>
                <div class="slide"><img src="images/1.jpg"></div>
                <div class="slide"><img src="images/2.jpg"></div>
                <div class="slide"><img src="images/3.jpg"></div>
                <div class="slide"><img src="images/4.jpg"></div>
                <div class="slide"><img src="images/5.jpg"></div>
                <div class="slide"><img src="images/6.jpg"></div>
                <!-- 第一张的副本放在最后 -->
                <div class="slide"><img src="images/0.jpg"></div>
            </div>
        </div>
        <div class="indicator" id="indicator"></div>

        <!-- 网盘链接 -->
        <a href="https://box.nju.edu.cn/d/e8ffbd52d7874193b37c/" class="cloud-link" target="_blank">获取完整相册集</a>
    </div>
    <audio src="hdb.mp3" autoplay loop id="song"></audio>

    <script>
        const slider = document.getElementById('slider2');
        const photoSlider = document.getElementById('photoSlider');
        const slides = document.querySelectorAll('.slide');
        const totalRealSlides = 7;
        const totalSlides = slides.length;
        let currentIndex = 1;
        let isAnimating = false;

        // 初始化位置和指示器
        function initSlider() {
            const slideWidth = slider.offsetWidth;
            slider.scrollLeft = slideWidth;

            // 初始化指示器
            const indicator = document.getElementById('indicator');
            indicator.innerHTML = '';
            for (let i = 0; i < totalRealSlides; i++) {
                const dot = document.createElement('div');
                dot.className = 'dot' + (i === 0 ? ' active' : '');
                indicator.appendChild(dot);
            }
        }

        // 新的滚动处理逻辑
        function handleScroll() {
            if (isAnimating) return;

            const slideWidth = slider.offsetWidth;
            const scrollPos = slider.scrollLeft;
            const maxScroll = slideWidth * (totalRealSlides + 1);

            // 边界检测逻辑
            if (scrollPos <= slideWidth * 0.5) {
                slider.scrollTo({ left: slideWidth * (totalSlides - 2), behavior: 'instant' });
                currentIndex = totalRealSlides;
            } else if (scrollPos >= slideWidth * (totalSlides - 1.5)) {
                slider.scrollTo({ left: slideWidth, behavior: 'instant' });
                currentIndex = 1;
            }// 正常滑动
            else {
                currentIndex = Math.round(scrollPos / slideWidth);
            }

            // 更新当前活动卡片
            const activeIndex = Math.round(scrollPos / slideWidth);
            slides.forEach((slide, index) => {
                slide.classList.toggle('active', index === activeIndex);
            });


            updateIndicator();
            isAnimating = false;
        }

        // 优化指示器更新
        function updateIndicator() {
            const realIndex = (currentIndex - 1) % totalRealSlides;
            document.querySelectorAll('.dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === realIndex);
            });
        }

        // 添加节流滚动监听
        let isScrolling;
        slider.addEventListener('scroll', () => {
            window.clearTimeout(isScrolling);
            isScrolling = setTimeout(handleScroll, 100);
        });


        // 创建飘落照片
        function createFallingPhotos() {
            const photos = [
                'images/0.jpg','images/1.jpg', 'images/2.jpg', 'images/3.jpg',
                'images/4.jpg', 'images/5.jpg', 'images/6.jpg'
            ];

            photos.forEach((img, index) => {
                for (let i = 0; i < 3; i++) { // 每个照片生成3个飘落元素
                    const div = document.createElement('div');
                    div.className = 'falling-photo';
                    div.style.zIndex = 999;
                    div.style.background = `url(${img}) center/cover`;
                    div.style.left = Math.random() * 100 + 'vw';
                    div.style.animationDuration = Math.random() * 3 + 5 + 's';
                    div.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(div);
                }
            });
        }

        // 自动播放彩带
        function createConfetti() {
            const colors = ['#ffdd00', '#ff6b6b', '#4ecdc4', '#45b7d1'];
            for (let i = 0; i < 50; i++) {
                const div = document.createElement('div');
                div.style.cssText = `
                    width: 8px;
                    height: 8px;
                    background: ${colors[i % 4]};
                    position: fixed;
                    border-radius: 50%;
                    animation: float ${Math.random() * 3 + 3}s linear infinite;
                    left: ${Math.random() * 100}vw;
                    animation-delay: ${Math.random() * 2}s;
                `;
                document.body.appendChild(div);
            }
        }
        const song = document.getElementById('song');
        // 初始化
        window.onload = () => {
            initSlider();
            createFallingPhotos();
            createConfetti();
            // 在window.onload中添加以下代码实现加载动画
            const loader = document.createElement('div');
            loader.innerHTML = `
    <style>
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ff8e8e;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #fff;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
    <div class="loader">
        <div class="spinner"></div>
    </div>
`;
            document.body.appendChild(loader);
        }
        window.addEventListener('load', () => {
            document.querySelector('.loader').remove();
        });
        window.addEventListener('click', () => {
            song.play();
        });
    </script>
</body>

</html>